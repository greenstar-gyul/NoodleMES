<template>
  <!-- ìƒë‹¨ ì˜ì—­: ìƒì‚°ê³„íš ì¡°íšŒ ë° ì´ˆê¸°í™” ë“±ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ -->
  <!-- ì¡°íšŒëœ ê³„íš(prdp_code)ì€ @load-planed ì´ë²¤íŠ¸ë¡œ ì „ë‹¬ -->
  <!-- ì´ˆê¸°í™” ë²„íŠ¼ í´ë¦­ ì‹œ @reset ì´ë²¤íŠ¸ ë°œìƒ -->
  <ProductionTopzone 
    @load-planed="loadPlaned" 
    @reset="handleReset"
  />

  <!-- í•˜ë‹¨ ì˜ì—­: ì œí’ˆ ë° ìƒì‚°ë¼ì¸ ìž…ë ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ -->
  <!-- ìƒë‹¨ì—ì„œ ì „ë‹¬ë°›ì€ prdp_codeë¥¼ propsë¡œ ì „ë‹¬ -->
  <!-- í•˜ë‹¨ ì»´í¬ë„ŒíŠ¸ì— refë¥¼ ì—°ê²°í•˜ì—¬ ë©”ì„œë“œ ì ‘ê·¼ ê°€ëŠ¥ -->
  <ProductionBottomzone 
    :prdp="prdp_code" 
    ref="bottomRef"
  />
</template>

<script setup>
// ðŸ“¦ Vueì˜ ref API ë¶ˆëŸ¬ì˜¤ê¸°
import { ref } from 'vue';

// ðŸ“‚ ìƒë‹¨/í•˜ë‹¨ ì»´í¬ë„ŒíŠ¸ import
import ProductionTopzone from './production-manage-sub/Production-topzone.vue';
import ProductionBottomzone from './production-manage-sub/Production-bottomzone.vue';

// ðŸŸ¡ ìƒë‹¨ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„ íƒëœ ìƒì‚°ê³„íš ì½”ë“œ (prdp_code)ë¥¼ ì €ìž¥í•˜ëŠ” ë³€ìˆ˜
const prdp_code = ref('');

// ðŸ” í•˜ë‹¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ref (ë©”ì„œë“œ í˜¸ì¶œì„ ìœ„í•´ ì‚¬ìš©)
const bottomRef = ref();

// âœ… ìƒë‹¨ì—ì„œ ê³„íšì„ ì¡°íšŒí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
// -> ì „ë‹¬ëœ ìƒì‚°ê³„íš(plan)ì„ prdp_codeì— ì €ìž¥í•˜ë©´,
//    ì´ ê°’ì´ ProductionBottomzoneìœ¼ë¡œ ì „ë‹¬ë˜ê³ , í•˜ë‹¨ì—ì„œ í•´ë‹¹ ê³„íšì— ë§žëŠ” ë°ì´í„°ê°€ ì¡°íšŒë¨
const loadPlaned = (plan) => {
  console.log(`ì¡°íšŒëœ ê³„íš: ${plan}`);
  prdp_code.value = plan;
};

// ðŸ”„ ìƒë‹¨ì—ì„œ ì´ˆê¸°í™” ìš”ì²­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
// -> í•˜ë‹¨ ì»´í¬ë„ŒíŠ¸ì˜ resetAll() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë°ì´í„° ì´ˆê¸°í™”
const handleReset = () => {
  bottomRef.value?.resetAll();
};
</script>
